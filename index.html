<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <title>Mapa Interativo — Armando & Lara</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    :root{--blue:#1d4ed8;--purple:#a855f7;--fg:#0f172a;--bg:#f8fafc;--card:#fff;--muted:#64748b;--shadow:0 10px 24px rgba(2,6,23,.08)}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto}
    #map{width:100%;height:100vh}
    /* Pins */
    .pin{width:18px;height:18px;border-radius:50% 50% 50% 0;transform:rotate(-45deg);border:2px solid #fff;position:relative;box-shadow:0 2px 8px rgba(2,6,23,.25)}
    .pin.blue{background:var(--blue)} .pin.purple{background:var(--purple)}
    .pin.both{background:linear-gradient(135deg,var(--blue) 0 50%,var(--purple) 50% 100%)}
    .pin::after{content:"";position:absolute;width:6px;height:6px;border-radius:50%;background:rgba(255,255,255,.85);top:4px;left:4px;transform:rotate(45deg)}
    /* Legenda fixa */
    .legend{position:fixed;left:12px;bottom:12px;z-index:4000;background:var(--card);border:1px solid #e2e8f0;border-radius:16px;box-shadow:var(--shadow);padding:10px 12px;min-width:200px}
    .legend h3{margin:0 0 8px 0;font-size:13px;text-transform:uppercase;letter-spacing:.08em;color:var(--muted)}
    .legend-item{display:grid;grid-template-columns:20px 1fr;gap:8px;align-items:center;padding:6px 2px}
    .dot{width:14px;height:14px;border-radius:50%;border:2px solid #fff;box-shadow:0 0 0 1px #cbd5e1 inset}
    .dot.blue{background:var(--blue)} .dot.purple{background:var(--purple)}
    .dot.both{background:linear-gradient(90deg,var(--blue) 0 50%,var(--purple) 50% 100%)}
  </style>
</head>
<body>
  <div id="map"></div>

  <!-- Legenda -->
  <div class="legend" role="note" aria-label="Legenda dos marcadores">
    <h3>Legenda</h3>
    <div class="legend-item"><span class="dot blue"></span><span>Azul — <strong>Armando</strong></span></div>
    <div class="legend-item"><span class="dot purple"></span><span>Lilás — <strong>Lara</strong></span></div>
    <div class="legend-item"><span class="dot both"></span><span>Combinação — <strong>Lara &amp; Armando</strong></span></div>
  </div>

  <script>
    /* ============================================================
       EDITE AQUI: lista de locais (simples e direto)
       Campos:
         city, country (texto)
         lat, lng (número)
         type: "Armando" | "Lara" | "Lara & Armando"
         bullets: array de strings (opcional)
       Para adicionar: copie um bloco e altere os valores.
    ============================================================ */
    const LOCATIONS = [
      {
        city: "Bordeaux", country: "França",
        lat: 44.8378, lng: -0.5792,
        type: "Lara & Armando",
        bullets: ["2023-05-10: Evento A", "2023-07-22: Encontro com equipe"]
      },
      {
        city: "Leipzig", country: "Alemanha",
        lat: 51.3397, lng: 12.3731,
        type: "Armando",
        bullets: ["2024-02-01: Reunião", "2024-03-10: Apresentação"]
      },
      {
        city: "Fernando de Noronha", country: "Brasil",
        lat: -3.8570, lng: -32.4290,
        type: "Lara",
        bullets: ["2024-04-18: Seminário", "2024-05-05: Visita técnica"]
      }
    ];

    // --- Mapa ---
    const map = L.map("map").setView([20,0], 2);
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", { maxZoom: 19, attribution: "&copy; OSM" }).addTo(map);
    const markersLayer = L.layerGroup().addTo(map);

    // Ícones
    function makeIcon(cls){return L.divIcon({className:"",html:`<div class="pin ${cls}"></div>`,iconSize:[18,18],iconAnchor:[9,18],popupAnchor:[0,-18]});}
    const ICONS = { "Armando": makeIcon("blue"), "Lara": makeIcon("purple"), "Lara & Armando": makeIcon("both") };

    function escapeHTML(s){ return String(s).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;"); }

    function addMarker(loc){
      const icon = ICONS[loc.type] || ICONS["Lara & Armando"];
      const title = [loc.city, loc.country].filter(Boolean).join(", ");
      const bullets = Array.isArray(loc.bullets) ? loc.bullets : [];
      const popup = `
        <div style="min-width:220px">
          <div style="font-weight:700;margin-bottom:6px">${escapeHTML(title||"Local")}</div>
          ${bullets.length ? `<ul style="margin:0 0 4px 18px;padding:0">${bullets.map(b=>`<li>${escapeHTML(b)}</li>`).join("")}</ul>` : `<div style="color:#64748b">Sem detalhes</div>`}
          <div style="font-size:11px;color:#94a3b8;margin-top:6px">${escapeHTML(loc.type)}</div>
        </div>`;
      L.marker([+loc.lat, +loc.lng], {icon}).bindPopup(popup).addTo(markersLayer);
    }

    // Render
    LOCATIONS.forEach(addMarker);
    try{
      const bounds = L.latLngBounds(LOCATIONS.map(l => [l.lat, l.lng]));
      if(bounds.isValid()) map.fitBounds(bounds.pad(0.2));
    }catch(e){}
  </script>
</body>
</html>
